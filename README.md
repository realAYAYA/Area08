# Area08
## ·简介：此次是关于一个“模拟机甲驾驶的”射击游戏的CPP代码项目，技术细节介绍及其更新日志
## ·作者:RealAYAYA2 从小的梦想就是“开高达”，不是一般的开，而是真正意义上的 驾驶反馈（座舱视角） 和 相对写实 的机甲战斗

### 2021/3/06 HUD - 用于展示前面的模块化部位伤害机制
#### ·我姑且捏了个简单的HUD来方便调试血量变化
#### ·考虑到座舱视角与偏向拟真的机甲驾驶，机体信息应当反映到座舱的仪表设备上（这可能需要动画和建模师们费点功夫）
#### ·座舱虽然暂不属于程序，但个人计划先要四种座舱（一种肯定不行）：A军团势力的量产型，B军团势力的量产型，某组织军火商外贸版C和D，或更多。四种风格。包括集体外形也是。
#### ·这样玩家会有个选择机体型号外，还有个有趣的选择，就是选择怎么样的座舱：AB军量产机肯定不能搭载互相的座舱，但可以考虑选用世界公开外贸的CD两种或更多。（也不能设计太多，太费钱，也会累死建模美术）
![Image text](https://github.com/realAYAYA/Area08/blob/main/Image_display/%E6%A8%A1%E5%9D%97%E5%8C%96%E4%BC%A4%E5%AE%B3%E5%AE%9E%E7%8E%B0.gif)

### 2021/3/04 近战机制（个人技术考验）
#### ·个人还是很喜欢ACT的，而且考虑联网对战，所以很喜欢黑魂的近战机制（弹反，弹刀什么的），所以模仿了一个
#### ·实现逻辑是动画状态通知类AnimNotifyState的使用，通过动画来决定武器可以造成伤害的时机，包括可以被弹反，或被弹刀的时机
#### ·为了实现武器造成伤害，弹反，弹刀，作者采用了碰撞盒+碰撞通道的组合，即伤害盒AttackBox，被弹反盒ParriedBox，被弹刀盒StaggeredBox，在冀由动画通知，在攻击动作播放到特定时机，将盒子的碰撞打开，如果此时有个敌人进行弹反行为的话，时机合适的话，被弹刀盒StaggeredBox检测碰撞，并激活被弹刀状态bParried，玩家播放被弹反的动画
#### ·代码有待优化，而且据说使用动画通知的问题在于：后期要假如联机对战的话并不好去处理
![Image text](https://github.com/realAYAYA/Area08/blob/main/Image_display/%E8%BF%91%E6%88%98%E5%BC%B9%E5%88%80%E7%9A%84%E5%AE%9E%E7%8E%B0.gif)

### 2021/2/21 子弹类ABullet
#### ·子弹类包含一些子弹的参数，伤害，伤害类型，初速，穿甲能力等等
#### ·子弹有碰撞事件，碰撞的时候进行物理材质检测来判断命中部位，决定播放什么样的特效，或是否要造成伤害

### 2021/2/16 射线检测组件
#### ·这个简单不介绍了

### 2021/2/15 机体生命管理组件MsHealthManager于模块化伤害机制（特色）
#### ·机甲的生命状态和受伤计算交给MsHealthManager组件来处理
#### ·由于组件可以处理机体健康属性，但是组件无法向上告诉机体一些消息（比如你血量变0，该爆了），解决方案是通过自定义事件委托的方式，将健康变化事件通知给角色来决定做什么行动
#### ·机体的血量计算不是简单的单血条，而是类似逃离塔科夫的分部位的模块伤害机制，分为：头，躯干，四肢
#### ·受伤发生时，伤害对象DamageCasuer自身会携带包含有命中部位的变量（具体看后面更新），进而判断伤害部位，并检DamageCasuer的伤害数据或装甲值来进行伤害计算
#### ·我的实现原理是用物理材质来判断受伤部位，但事实上有更好的模块化骨骼网络来做，只是当下缺乏这样的素材，先凑合下，后期有素材练习后一定补上。

### 2021/2/05 武器AMsWeapon、外挂装备AMsSpecialGear、机载设备AMsDevice
#### ·三者都有个父类AMsGer，方便统一一些基本数值属性与管理
#### ·机甲可以携带主武器和副手武器（限定副手），若干机载设备（取决于机体插槽数目），外挂装备AMsSpecialGear（可以提供被动或者主动能力，比如机械钩爪什么的）
#### ·调用同之前描述：机体AMS->武器管理组件MsGearManager->武器，其他设备同理
#### ·武器分枪械MsGUn和近战MsMeleeWeapon，二者继承于AMsWeapon类，同样是方便管理，近战和枪械的使用多少不同
#### ·武器AMsWeapon除了基本的攻击（开火）动作，可能有主动技能
#### ·武器AMsWeapon在进行攻击（开火）时，角色应当播放相应的蒙太奇动画，我的思路是蒙太奇动画素材引擎中蓝图已经弄好，然而cpp中的动画播放方法的调用并不是由角色自身存储，而是由武器自身有个DataTable来存储相关的角色蒙太奇资产的引用，所以调用过程为：角色->MsGearManager->AMsWeapon->播放此武器特有的攻击动作。释放武器的主动技能调用过程同理。

### 2021/2/09 武器管理组件MsGearManager
#### ·我希望的机甲是玩家可以一定程度上可以选择性的去搭载机载设备（Gear）（无需模型的内部改良配件MsDevice，类似戒指装备，需要模型动画的外挂设备MsSpecialGear）
#### ·机体本身功能有限，但机载设备尤其是外挂组件可以直接决定这台机甲的性能偏好，决定玩家的玩法（所以玩家想怎么玩就自己怎么选择机载设备出击）
#### ·机体默认可外挂设备的位置有6个部位，分为：左臂，右臂，左大腿，右大腿，左小腿，右小腿
#### ·可挂载的配件很多，但各个部位能挂载的设备在日后会做出一定限制，比如小腿挂件一般偏小型，是不可以挂载本应可以挂载到大腿或手臂上的装备
#### ·关于使用：玩家使用角色装备，角色对象会调用自身MsGearManager组件的上的装备信息，以此来激发武器或者外挂装备。

### 2021/1/25 角色组件（个人比较个性的实现）
#### ·为了方便管理日后的内容：武器装备的管理，角色的血量控制,射线检测等，将这些功能由放到组件中实现（代码美观点？）。
#### ·角色拥有若干组件，将上述很多功能由组件完成。但是，角色与组件的关系是上与下的关系，上可以调用下，但下尽可能的不会去调用上面的变量。

### 2020/11/5 创建角色
#### ·AArea08Character：为了方便管理项目的角色类（敌人、飞行员APilot、机甲AMS），基于ACharacter为父类建立了Area08Character子类，其拥有基本的操作（地面行动操控、互动及种种美术音效资源蓝图变量）
#### ·AMS:以AArea08Character为父类的子类（属于ACharacter类，但隔了一层，不知道这样做对后期合不合适），所以继承基本的行动和蓝图编辑功能；并添加一些机甲才会有的行为，例如开火，近战，被招架、弹刀，招架动作